# https://wiki.hyprland.org/Configuring/Binds/
# https://wiki.hyprland.org/Configuring/Keywords/

$mainMod = SUPER # Sets "Windows" key as main modifier

# ================================================================================================
# CORE WINDOW MANAGEMENT
# ================================================================================================

# Window Actions
bind = $mainMod, Q, killactive,
bind = $mainMod, Escape, exec, if hyprctl monitors -j | jq -e '.[] | select(.dpmsStatus == true)' > /dev/null; then hyprctl dispatch dpms off; else hyprctl dispatch dpms on; fi
bind = CTRL ALT, Escape, exit,

# Window Focus Movement (SUPER + hjkl)
bind = $mainMod, h, movefocus, l
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
bind = $mainMod, l, movefocus, r

# Window Swapping (SUPER + SHIFT + hjkl)
bind = $mainMod SHIFT, h, swapwindow, l
bind = $mainMod SHIFT, j, swapwindow, d
bind = $mainMod SHIFT, k, swapwindow, u
bind = $mainMod SHIFT, l, swapwindow, r

# Window Resizing - Regular (SUPER + ALT + hjkl)
bind = $mainMod ALT, h, exec, hyprctl --batch "keyword misc:animate_manual_resizes true; dispatch resizeactive -80 0; keyword misc:animate_manual_resizes false"
bind = $mainMod ALT, j, exec, hyprctl --batch "keyword misc:animate_manual_resizes true; dispatch resizeactive 0 80; keyword misc:animate_manual_resizes false"
bind = $mainMod ALT, k, exec, hyprctl --batch "keyword misc:animate_manual_resizes true; dispatch resizeactive 0 -80; keyword misc:animate_manual_resizes false"
bind = $mainMod ALT, l, exec, hyprctl --batch "keyword misc:animate_manual_resizes true; dispatch resizeactive 80 0; keyword misc:animate_manual_resizes false"

# Window Resizing - Smart (CTRL + SUPER + ALT + hjkl)
bind = $mainMod ALT CTRL, h, exec, bash ~/.config/hypr/scripts/system/smart-resize.sh extend left 80
bind = $mainMod ALT CTRL, j, exec, bash ~/.config/hypr/scripts/system/smart-resize.sh shrink left 80
bind = $mainMod ALT CTRL, k, exec, bash ~/.config/hypr/scripts/system/smart-resize.sh shrink right 80
bind = $mainMod ALT CTRL, l, exec, bash ~/.config/hypr/scripts/system/smart-resize.sh extend right 80

# Window Resizing - Minute (SUPER + ALT + CTRL + hjkl)
# binde = $mainMod ALT CTRL, h, resizeactive, -4 0
# binde = $mainMod ALT CTRL, j, resizeactive, 0 4
# binde = $mainMod ALT CTRL, k, resizeactive, 0 -4
# binde = $mainMod ALT CTRL, l, resizeactive, 4 0

# Window Resizing - Exact
bind = $mainMod ALT CTRL, V, resizeactive, exact 1822 1366 # Standard video
bind = $mainMod ALT, V, resizeactive, exact 2426 1367 # Widescreen video
bind = $mainMod ALT, B, resizeactive, exact 25% 25% # 1/4 of display

# Layout Controls
bind = $mainMod, Y, togglefloating
bind = $mainMod, M, fullscreen
bind = $mainMod, P, pseudo
bind = $mainMod, O, togglesplit
bind = $mainMod, S, swapsplit

bind = $mainMod, Left, layoutmsg, preselect l
bind = $mainMod, Down, layoutmsg, preselect d
bind = $mainMod, Up, layoutmsg, preselect u
bind = $mainMod, Right, layoutmsg, preselect r

# Alt-Tab Window Switching
bind = ALT, TAB, exec, $alt-tab
bind = ALT SHIFT, TAB, exec, $alt-tab

# ================================================================================================
# WORKSPACE MANAGEMENT
# ================================================================================================

# Switch to Workspace (SUPER + 1-9, 0)
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move Window to Workspace (SUPER + SHIFT + 1-9, 0)
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Workspace Navigation (SUPER + CTRL + j/k)
bind = $mainMod CTRL, j, workspace, e+1
bind = $mainMod CTRL, k, workspace, e-1

# ================================================================================================
# MOUSE BINDINGS
# ================================================================================================

# Mouse Window Controls
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# ================================================================================================
# SYSTEM HARDWARE CONTROLS
# ================================================================================================

# Volume Controls
bindel = ,XF86AudioRaiseVolume, exec, $volume-up
bindel = ,XF86AudioLowerVolume, exec, $volume-down
bindel = ,XF86AudioMute, exec, $volume-mute
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Brightness Controls
bindel = ,XF86MonBrightnessUp, exec, $brightness-up
bindel = ,XF86MonBrightnessDown, exec, $brightness-down

# Lid Switch
bindl = , switch:on:Lid Switch, exec, $lock

# ================================================================================================
# MEDIA CONTROLS
# ================================================================================================

# Standard Media Keys
bindl = ,XF86AudioNext, exec, $audio-next
bindl = ,XF86AudioPause, exec, $audio-pause
bindl = ,XF86AudioPlay, exec, $audio-pause
bindl = ,XF86AudioPrev, exec, $audio-prev

# MOC Player Controls (ALT + comma/minus/period)
bind = ALT, comma, exec, $music-prev
bind = ALT, minus, exec, $music-pause
bind = ALT, period, exec, $music-next

# ================================================================================================
# APPLICATION LAUNCHERS
# ================================================================================================

# Core Applications (CTRL + ALT + key)
bind = CTRL ALT, T, exec, $terminal
bind = CTRL ALT, backslash, exec, $editor
bind = CTRL ALT, W, exec, subl --new-window
bind = CTRL ALT, E, exec, $file-manager-tui
bind = $mainMod, F, exec, $file-manager-gui

# Launcher, Clipboard and Snippets
bind = $mainMod, R, exec, $launcher
bind = CTRL ALT, C, exec, $clipboard
bind = CTRL ALT, X, exec, $snippets

# Browser
bind = CTRL ALT, Q, exec, $browser https://skarlsen.io/ --new-window
bind = CTRL ALT, Y, exec, $browser http://10.13.0.200:8090 # Invidious
bind = $mainMod CTRL ALT, Y, exec, brave https://youtube.com # Invidious new window
bind = $mainMod CTRL ALT, P, exec, $browser http://10.13.0.200:8096 # Jellyfin

# Communication

# Productivity Applications
bind = CTRL ALT, B, exec, $password-manager
bind = CTRL ALT, P, exec, ~/.config/hypr/scripts/launchers/jellyfin.sh 1822 1367
bind = CTRL ALT, S, exec, $terminal -e zsh -i -c 'todo' # https://github.com/mdillondc/todo_txt_tui

# Scratchpads
bind = CTRL ALT, 1, exec, $music
bind = CTRL ALT, 2, exec, $pamix
bind = CTRL ALT, 3, exec, $email
bind = CTRL ALT, 4, exec, $easyeffects
bind = CTRL ALT, M, exec, $chat

# ================================================================================================
# SYSTEM FUNCTIONS
# ================================================================================================

# Screenshot
bind = CTRL ALT, U, exec, $screenshot-free
bind = CTRL ALT, I, exec, $screenshot-window

# System Controls
bind = $mainMod CTRL ALT, N, exec, $night-light
bind = $mainMod CTRL ALT, M, exec, $vpn-toggle

# Zoom Controls
bind = $mainMod, period, exec, hyprctl keyword cursor:zoom_factor 2.0
bind = $mainMod, comma, exec, hyprctl keyword cursor:zoom_factor 1.0